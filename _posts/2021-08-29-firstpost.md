---
published: true
---
## انواع ioc در asp.net
اگر تا به حال یک پروژه ی asp.net core رو ساخته اید چه پیشرفته و چه مبتدی باید با ioc یا همون inversion of control رو باهاش کار کرده باشید یا ایکنه کار کرده باشید ولی تاحالا اسمش به گوشتون نخورده باشه ioc به زبانی ساده تر میشه همون dependcy injection که خب اونم تزریق وابستگی های خودمونه پس فقط توی core یکم اسمش عوض شده و یک سری ویژگی های جدید بهش اضافه شده توی این پست هم قراره این ویژگی ها رو مورد بررسی قرار بدیم .

خب حالا چطوری باید با این ها کار کنیم ؟ توی پروژه های core یک کلاس به نام startup داریم اینجا جایی که به برناممون چیز هایی رو اضافه میکنیم مثل همین ioc و یا حتی کانکت شدن به یک دیتابیس و...
خب حالا یک متد داریم به نام ConfigureServices که یک IServiceCollection رو ورودی میگیره به نام services که بهش نیاز داریم تا موارد گفته شده رو به برناممون اضافه کنیم.

حالا وقتشه که بریم سر اصل مطلب برای اجرای ioc ما نیاز به یک interface و یک class داریم که خب ما زیاد هم وارد این موارد نمیشیم.
رایج ترین راه استفاده از متد AddScoped هست که یکی از متد های services هست روش کارش هم خیلی راهته

> services.AddScoped<IEnterface , ClassImplemated();

همین ! خب حالا بریم سراغ ویژگی هاش این متد معمولا وقتی استفاده میشه که خب هر کاربری میتونه استفاده کنه از متد هاش چه کاربر های عادی چه ادمین حالا این چه جوی کار میکنه . اگر بخایم ساده بگیم هر درخواستی که میدن کاربر ها برای هرکدوم ازشون یک نسخه از کلاسی که ارث بری کرده رو میده همین.

خب حالا بریم سراغ بعدی یعنی AddSingleton . طرز استفاده اش که خب با قبلی هیچ تفاوتی نداره .
اما چه ویژگی هایی داره . این متد برای کل اپلیکیشن یک نسخه از کلاس رو میده پس و اصولا برای کلاس هایی استفاده میشه که برای ارسال پیام و یا ایمیل و مشابه ی اینها استفاده میشن

خب بریم سراغ آخرین متد AddTransient طرز استفاده ی اینم هم هیچ تفاوتی با قبلی ها نداره .
حالا ویژگی هاش چیه توی AddScoped ما گفتیم برای هر درخواستی کی نمونه میده مصلا توی یک controller ما 3 بار از interface استفاده کردیم خب پس 3 نسخه بهش میده ولی توی AddTransient برای هر 3 مورد یک نسخه میده همین !

خب حالا فرض میکنیم که توی startup ما اومدیم و class ها و interface ها رو تنظیم کردیم استفاده کردن از اینها خیلی راحت تر از تعریف هاشونه . شما فقط کافیه که توی کنترلری ای که بهشون نیاز داری یک سازنده بساین واسش بعد هم اون interface ای که بهش نیاز دارین رو inject کنید و از متد ها استفاده کنید

تاریخ ثبت : 1400/6/7